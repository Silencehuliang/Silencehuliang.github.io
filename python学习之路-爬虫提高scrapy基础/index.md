# Python学习之路-爬虫提高:scrapy基础


## 为什么要学习scrapy

通过前面的学习，我们已经能够解决90%的爬虫问题了，那么scrapy是为了解决剩下的10%的问题么，不是，scrapy框架能够让我们的爬虫效率更高

## 什么是scrapy

Scrapy是一个为了爬取网站数据，提取结构性数据而编写的应用**框架**，我们只需要实现少量的代码，就能够快速的抓取。

Scrapy 使用了Twisted['twɪstɪd]`异步`网络框架，可以加快我们的下载速度。

文档地址：http://scrapy-chs.readthedocs.io/zh_CN/1.0/intro/overview.html

## 异步和非阻塞的区别

前面我们说Twisted是一个异步的网络框架，经常我们也听到一个词语叫做非阻塞，那么他们有什么区别呢？

- 异步：调用在发出之后，这个调用就直接返回，不管有无结果
- 非阻塞：**关注的是程序在等待调用结果（消息，返回值）时的状态**，指在不能立刻得到结果之前，该调用不会阻塞当前线程。

## scrapy是工作流程

![](https://tvax2.sinaimg.cn/large/00729CCqgy1gqoofcu1w0j30gl0b4ta0.jpg)

其流程可以描述如下：

1. 调度器把requests-->引擎-->下载中间件--->下载器
2. 下载器发送请求，获取响应---->下载中间件---->引擎--->爬虫中间件--->爬虫
3. 爬虫提取url地址，组装成request对象---->爬虫中间件--->引擎--->调度器
4. 爬虫提取数据--->引擎--->管道
5. 管道进行数据的处理和保存

注意：

- 图中绿色线条的表示数据的传递
- 注意图中中间件的位置，决定了其作用
- 注意其中引擎的位置，所有的模块之前相互独立，只和引擎进行交互

## scrapy中每个模块的具体作用

![](https://tvax2.sinaimg.cn/large/00729CCqgy1gqooiqy6oej30vg0k8qc4.jpg)
