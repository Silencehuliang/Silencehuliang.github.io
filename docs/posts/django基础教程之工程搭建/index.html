<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Django基础教程之工程搭建 - Silence Blog</title><meta name="Description" content="Django介绍"><meta property="og:title" content="Django基础教程之工程搭建" />
<meta property="og:description" content="Django介绍" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://49.235.231.121/posts/django%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%E4%B9%8B%E5%B7%A5%E7%A8%8B%E6%90%AD%E5%BB%BA/" />
<meta property="article:published_time" content="2019-02-17T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-02-22T00:00:00+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Django基础教程之工程搭建"/>
<meta name="twitter:description" content="Django介绍"/>
<meta name="application-name" content="Silence Blog">
<meta name="apple-mobile-web-app-title" content="Silence Blog"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://49.235.231.121/posts/django%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%E4%B9%8B%E5%B7%A5%E7%A8%8B%E6%90%AD%E5%BB%BA/" /><link rel="prev" href="http://49.235.231.121/posts/django%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%E4%B9%8Bdjango%E4%BB%8B%E7%BB%8D/" /><link rel="next" href="http://49.235.231.121/posts/django%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%E4%B9%8B%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Django基础教程之工程搭建",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/49.235.231.121\/posts\/django%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%E4%B9%8B%E5%B7%A5%E7%A8%8B%E6%90%AD%E5%BB%BA\/"
        },"genre": "posts","keywords": "Django2.x, 教程","wordcount":  2887 ,
        "url": "http:\/\/49.235.231.121\/posts\/django%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%E4%B9%8B%E5%B7%A5%E7%A8%8B%E6%90%AD%E5%BB%BA\/","datePublished": "2019-02-17T00:00:00+00:00","dateModified": "2019-02-22T00:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": "作者"},"author": {
                "@type": "Person",
                "name": "作者"
            },"description": "Django介绍"
    }
    </script></head>
    <body header-desktop="" header-mobile=""><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Silence Blog">Silence Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Silence Blog">Silence Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Django基础教程之工程搭建</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>作者</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/django%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"><i class="far fa-folder fa-fw"></i>Django基础教程</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2019-02-17">2019-02-17</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 2887 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 6 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#简介">简介</a></li>
    <li><a href="#教程">教程</a>
      <ul>
        <li><a href="#安装环境">安装环境</a></li>
        <li><a href="#项目工程">项目工程</a></li>
        <li><a href="#应用">应用</a></li>
        <li><a href="#路由">路由</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p><strong>声明：以下内容均为我个人的理解，如果发现错误或者疑问可以联系我共同探讨</strong></p>
<p>本教程为Django基础教程系列第二篇，前面篇章在以下链接：</p>
<p><a href="http://49.235.231.121/2019/django%e5%9f%ba%e7%a1%80%e6%95%99%e7%a8%8b%e4%b8%80/" target="_blank" rel="noopener noreffer">Django基础教程之Django介绍</a></p>
<h2 id="简介">简介</h2>
<p>每个工程项目的开始阶段往往决定了项目的大致走向，在工程搭建的过程中要为后面的项目开发做好准备。</p>
<p>为了不受Python环境的影响，最好建立虚拟环境，在虚拟环境中搭建项目</p>
<h2 id="教程">教程</h2>
<h3 id="安装环境">安装环境</h3>
<h4 id="安装virtualenv">安装virtualenv</h4>
<p><a href="https://pypi.org/project/virtualenv/" target="_blank" rel="noopener noreffer">virtualenv</a>是一个用于创建Python虚拟环境的工具包，可以通过pip直接安装</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">pip3</span> <span class="n">install</span> <span class="n">virtualenv</span>
</code></pre></div><h4 id="创建虚拟环境">创建虚拟环境</h4>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">virtualenv</span> <span class="o">--</span><span class="n">python</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">python3</span> <span class="n">django2</span><span class="o">.</span><span class="mf">2.2</span><span class="n">_py3</span>
</code></pre></div><p>django2.2.2_py3为虚拟环境的名字，这里是以Django的版本+Python版本命名，&ndash;python指定了Python的位置。</p>
<h4 id="激活虚拟环境">激活虚拟环境</h4>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">source</span> <span class="n">django2</span><span class="o">.</span><span class="mf">2.2</span><span class="n">_py3</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
</code></pre></div><p>激活完成后会在命令行最前面显示当前的虚拟环境名</p>
<h4 id="安装django">安装Django</h4>
<p>本教程使用django2.2.2版本</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">pip</span> <span class="n">install</span> <span class="n">django</span><span class="o">==</span><span class="mf">2.2</span><span class="o">.</span><span class="mi">2</span>
</code></pre></div><h3 id="项目工程">项目工程</h3>
<p>在Django中，项目的工程目录可以通过Django提供的命令来创建。</p>
<h4 id="创建">创建</h4>
<p>创建工程的命令为：</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">django</span><span class="o">-</span><span class="n">admin</span> <span class="n">startproject</span> <span class="err">工程名称</span>
</code></pre></div><p>例如你想在做面食创建一个demo的工程项目，可以执行如下命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">cd</span> <span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span>
<span class="n">django</span><span class="o">-</span><span class="n">admin</span> <span class="n">startproject</span> <span class="n">demo</span>
</code></pre></div><p>执行完毕后，会在当前目录即<code>Desktop</code>目录下生成一个名为demo的目录，该目录存放着整个Django工程</p>
<h4 id="工程目录说明">工程目录说明</h4>
<p>查看创建的工程目录，结构如下</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="p">(</span><span class="n">django2</span><span class="o">.</span><span class="mf">2.2</span><span class="n">_py3</span><span class="p">)</span> <span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">demo</span><span class="err">$</span> <span class="n">tree</span>
<span class="o">.</span>
<span class="o">|--</span> <span class="n">demo</span>
<span class="o">|</span>   <span class="o">|--</span> <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
<span class="o">|</span>   <span class="o">|--</span> <span class="n">settings</span><span class="o">.</span><span class="n">py</span>
<span class="o">|</span>   <span class="o">|--</span> <span class="n">urls</span><span class="o">.</span><span class="n">py</span>
<span class="o">|</span>   <span class="err">`</span><span class="o">--</span> <span class="n">wsgi</span><span class="o">.</span><span class="n">py</span>
<span class="err">`</span><span class="o">--</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span>

<span class="mi">1</span> <span class="n">directory</span><span class="p">,</span> <span class="mi">5</span> <span class="n">files</span>
</code></pre></div><ul>
<li><strong>demo</strong>：与项目同名的目录，存放项目相关文件。</li>
<li><strong>settings.py</strong>：项目的配置文件。</li>
<li><strong>urls.py</strong>：项目的总URL配置文件。</li>
<li><strong>wsgi.py</strong>：项目与WSGI兼容的Web服务器入口。</li>
<li><strong>manage.py</strong> 项目管理文件，通过它管理项目，同时也是启动项目的入口。</li>
</ul>
<h4 id="运行开发服务器">运行开发服务器</h4>
<p>在开发阶段，为了能够快速预览到开发的效果，Djnago提供了一个纯python编写的轻量级web服务器，提供开发阶段使用。</p>
<p>运行服务器命令如下：</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">runserver</span>
</code></pre></div><p><strong>默认IP是127.0.0.1，默认端口为8000，可以写指定IP与端口，格式为：ip:端口</strong></p>
<p>启动后可以看到以下信息</p>
<pre><code>(django2.2.2_py3) ~/Desktop/demo$ python manage.py runserver
Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).

You have 17 unapplied migration(s). Your project may not work properly until you apply the migrations for app(s): admin, auth, contenttypes, sessions.
Run 'python manage.py migrate' to apply them.

February 17, 2019 - 05:29:56
Django version 2.2.2, using settings 'demo.settings'
Starting development server at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
</code></pre><p>在浏览器中输入网址“127.0.0.1:8000”便可看到效果。</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://tvax2.sinaimg.cn/large/006lmzsGgy1gazi40lmx6j31h70s5t9z.jpg"
        data-srcset="https://tvax2.sinaimg.cn/large/006lmzsGgy1gazi40lmx6j31h70s5t9z.jpg, https://tvax2.sinaimg.cn/large/006lmzsGgy1gazi40lmx6j31h70s5t9z.jpg 1.5x, https://tvax2.sinaimg.cn/large/006lmzsGgy1gazi40lmx6j31h70s5t9z.jpg 2x"
        data-sizes="auto"
        alt="https://tvax2.sinaimg.cn/large/006lmzsGgy1gazi40lmx6j31h70s5t9z.jpg"
        title="https://tvax2.sinaimg.cn/large/006lmzsGgy1gazi40lmx6j31h70s5t9z.jpg" /></p>
<ul>
<li>django默认工作在调式Debug模式下，如果增加、修改、删除文件，服务器会自动重启。</li>
<li>按ctrl+c停止服务器。</li>
</ul>
<h3 id="应用">应用</h3>
<p>在Web开发中通常一个大型项目是由无数个应用构成的。将开发中的工程项目拆分成不同的功能模块，可以让各功能模块之间保持相对独立，更利于我们开发与管理。</p>
<h4 id="创建-1">创建</h4>
<p>Django为我们提供了创建应用的命令，创建应用的命令为：</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">startapp</span> <span class="err">子应用名称</span>
</code></pre></div><p><strong>需要注意的是，创建应用时必须在manage.py所在的目录下</strong></p>
<p>现在创建一个用户相关的应用users，可以执行：</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">startapp</span> <span class="n">users</span>
</code></pre></div><p>执行后，可以看到工程目录中多出了一个名为users的子目录。</p>
<h4 id="应用目录说明">应用目录说明</h4>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">(</span>django2.2.2_py3<span class="o">)</span> ~/Desktop/demo$ ls
db.sqlite3  demo  manage.py  users
<span class="o">(</span>django2.2.2_py3<span class="o">)</span> ~/Desktop/demo$ tree
.
<span class="p">|</span>-- db.sqlite3
<span class="p">|</span>-- demo
<span class="p">|</span>   <span class="p">|</span>-- __init__.py
<span class="p">|</span>   <span class="p">|</span>-- __pycache__
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>-- __init__.cpython-36.pyc
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>-- settings.cpython-36.pyc
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>-- urls.cpython-36.pyc
<span class="p">|</span>   <span class="p">|</span>   <span class="sb">`</span>-- wsgi.cpython-36.pyc
<span class="p">|</span>   <span class="p">|</span>-- settings.py
<span class="p">|</span>   <span class="p">|</span>-- urls.py
<span class="p">|</span>   <span class="sb">`</span>-- wsgi.py
<span class="p">|</span>-- manage.py
<span class="sb">`</span>-- users
    <span class="p">|</span>-- __init__.py
    <span class="p">|</span>-- admin.py
    <span class="p">|</span>-- apps.py
    <span class="p">|</span>-- migrations
    <span class="p">|</span>   <span class="sb">`</span>-- __init__.py
    <span class="p">|</span>-- models.py
    <span class="p">|</span>-- tests.py
    <span class="sb">`</span>-- views.py

<span class="m">4</span> directories, <span class="m">17</span> files
</code></pre></div><ul>
<li><strong>admin.py</strong>：后台管理配置信息。</li>
<li><strong>apps.py</strong>：配置信息。</li>
<li><strong>migrations</strong> 存放数据库迁移历史文件。</li>
<li><strong>models.py</strong>：保存数据库模型类。</li>
<li><strong>tests.py</strong>：用于开发测试用例，编写单元测试。</li>
</ul>
<h4 id="注册应用">注册应用</h4>
<p>创建完应用后Django并不能自动将项目与应用联系起来，需要我们在工程配置文件<code>settings.py</code>中注册才能使用。</p>
<p>在工程配置文件<code>settings.py</code>中的<strong>INSTALLED_APPS</strong>项负责注册安装好的应用，初始工程中的INSTALLED_APPS如下：</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://tva3.sinaimg.cn/large/006lmzsGgy1gazjj3xb2dj318s0pun2d.jpg"
        data-srcset="https://tva3.sinaimg.cn/large/006lmzsGgy1gazjj3xb2dj318s0pun2d.jpg, https://tva3.sinaimg.cn/large/006lmzsGgy1gazjj3xb2dj318s0pun2d.jpg 1.5x, https://tva3.sinaimg.cn/large/006lmzsGgy1gazjj3xb2dj318s0pun2d.jpg 2x"
        data-sizes="auto"
        alt="https://tva3.sinaimg.cn/large/006lmzsGgy1gazjj3xb2dj318s0pun2d.jpg"
        title="https://tva3.sinaimg.cn/large/006lmzsGgy1gazjj3xb2dj318s0pun2d.jpg" /></p>
<p>这些默认应用的作用可以看这篇文章：<a href="http://49.235.231.121/2019/Django%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e8%af%a6%e8%a7%a3" target="_blank" rel="noopener noreffer">Django配置文件详解</a></p>
<p><strong>注册一个应用的方法是将应用的配置信息文件apps.py中的Config类添加到INSTALLED_APPS列表中。</strong></p>
<p>例如，注册刚创建的users应用，可在INSTALLED_APPS列表中添加**&lsquo;users.apps.UsersConfig&rsquo;**。</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://tva3.sinaimg.cn/large/006lmzsGgy1gazjpcuif9j31mq0uq45b.jpg"
        data-srcset="https://tva3.sinaimg.cn/large/006lmzsGgy1gazjpcuif9j31mq0uq45b.jpg, https://tva3.sinaimg.cn/large/006lmzsGgy1gazjpcuif9j31mq0uq45b.jpg 1.5x, https://tva3.sinaimg.cn/large/006lmzsGgy1gazjpcuif9j31mq0uq45b.jpg 2x"
        data-sizes="auto"
        alt="https://tva3.sinaimg.cn/large/006lmzsGgy1gazjpcuif9j31mq0uq45b.jpg"
        title="https://tva3.sinaimg.cn/large/006lmzsGgy1gazjpcuif9j31mq0uq45b.jpg" /></p>
<h4 id="创建视图">创建视图</h4>
<p>视图用于编写应用的业务逻辑，Django的视图是在应用中views.py中的</p>
<p>进入users应用，在views.py中编写视图代码。</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>

<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    视图index
</span><span class="s2">    :param request: 包含了请求信息的请求对象
</span><span class="s2">    :return: 响应对象
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&#34;hello Django&#34;</span><span class="p">)</span>
</code></pre></div><p>说明：</p>
<p><a href="http://49.235.231.121/2019/Django%e5%9f%ba%e7%a1%80%e6%95%99%e7%a8%8b%e4%b9%8bDjango%e4%bb%8b%e7%bb%8d/#mvt%e6%a8%a1%e5%bc%8f" target="_blank" rel="noopener noreffer">Django基础教程之Django介绍</a>中提到过，Django中视图的功能是接受请求，进行业务处理，返回响应。在这里request是接受请求的对象，业务处理是生成<code>hello Django</code>字符串，而HttpResponse是返回响应的对象。</p>
<h3 id="路由">路由</h3>
<h4 id="什么是路由">什么是路由</h4>
<p>在Django中，路由是将请求的URL分发给视图的系统。</p>
<h4 id="路由定义的位置">路由定义的位置</h4>
<p>一般情况下会有两种路由定义的位置，一种是<a href="http://49.235.231.121/2019/Django%e5%9f%ba%e7%a1%80%e6%95%99%e7%a8%8b%e4%b9%8b%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e8%af%a6%e8%a7%a3" target="_blank" rel="noopener noreffer">项目工程</a>的urls.py中，一种是每个应用下的urls.py中。<a href="http://49.235.231.121/2019/Django%e5%9f%ba%e7%a1%80%e6%95%99%e7%a8%8b%e4%b9%8b%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e8%af%a6%e8%a7%a3" target="_blank" rel="noopener noreffer">项目工程</a>的urls.py是Django解析路由的入口</p>
<h4 id="路由解析顺序">路由解析顺序</h4>
<p>Django在接收到请求时会先从<a href="http://49.235.231.121/2019/Django%e5%9f%ba%e7%a1%80%e6%95%99%e7%a8%8b%e4%b9%8b%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e8%af%a6%e8%a7%a3" target="_blank" rel="noopener noreffer">项目工程</a>urls.py中的urlpatterns列表中从上至下的顺序查找对应路由规则，如果发现规则为include包含，则再进入被包含的urls中的urlpatterns列表由上至下进行查询。</p>
<h4 id="路由命名">路由命名</h4>
<p>在定义路由的时候，可以为路由命名，方便查找特定视图的具体路径信息。</p>
<ul>
<li>
<p>在定义include函数定义路由时，可以使用namespace参数定义路由的命名空间，如</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^users/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s1">&#39;users.urls&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;users&#39;</span><span class="p">)),</span>
</code></pre></div><p>命名空间表示，凡是users.urls中定义的路由，均属于namespace指明的users名下。</p>
<p><strong>命名空间的作用：避免不同应用中的路由使用了相同的名字发生冲突，使用命名空间区别开。</strong></p>
</li>
<li>
<p>在定义普通路由时，可以使用name参数指明路由的名字，如</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^index/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">),</span>
<span class="p">]</span>
</code></pre></div></li>
</ul>
<h4 id="路径结尾斜线的说明">路径结尾斜线的说明</h4>
<p>Django中定义路由时，通常以斜线结尾，其好处是用户访问不以斜线结尾的相同路径时，Django会把用户重定向到以斜线/结尾的路径上，而不会返回404不存在。如</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^index/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">),</span>
<span class="p">]</span>
</code></pre></div><p>用户访问 index 或者 index/ 网址，均能访问到index视图。</p>
<p>虽然路由结尾带斜线能带来上述好处，但是却违背了HTTP中URL表示资源位置路径的设计理念。具体是否结尾带斜线以个人风格为准。</p>
<p>接下来我们要通过路由将工程-&gt;应用-&gt;视图给联系起来</p>
<p>首先在工程的<a href="#%e5%b7%a5%e7%a8%8b%e7%9b%ae%e5%bd%95%e8%af%b4%e6%98%8e" rel="">总路由</a>中添加users应用的路由信息</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="o">+</span> <span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span><span class="p">,</span> <span class="n">include</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;admin/&#39;</span><span class="p">,</span> <span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">),</span>
 <span class="o">+</span>  <span class="n">path</span><span class="p">(</span><span class="s1">&#39;users/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s1">&#39;users.urls&#39;</span><span class="p">)),</span>
<span class="p">]</span>
</code></pre></div><p>说明：</p>
<ul>
<li>&lsquo;users/&lsquo;表示所有/users/开头的请求</li>
<li>include表示以/users/匹配到users应用中urls.py的所有路由，即只要请求的URL是/users/开头都会去users应用中的urls.py中匹配剩下的路由。</li>
</ul>
<p>将总路由引到users应用后，需要修改users应用中urls.py的信息</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span><span class="p">,</span><span class="n">re_path</span>
  
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">views</span>

<span class="c1"># urlpatterns是被django自动识别的路由列表变量</span>
<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
		<span class="c1"># re_path是通过正则表达式来构造路由</span>
  	<span class="c1"># re_path(路由正则表达式，视图)</span>
    <span class="n">re_path</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^index/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">index</span><span class="p">),</span>
<span class="p">]</span>                                                              
</code></pre></div><p>说明：</p>
<ul>
<li>现在完整的请求url为：/users/index/</li>
</ul>
<p>路由修改完成后，重启Django程序，就可以在浏览器中看到返回的信息了</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2019-02-22</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/django2.x/">Django2.x</a>,&nbsp;<a href="/tags/%E6%95%99%E7%A8%8B/">教程</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/django%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%E4%B9%8Bdjango%E4%BB%8B%E7%BB%8D/" class="prev" rel="prev" title="Django基础教程之Django介绍"><i class="fas fa-angle-left fa-fw"></i>Django基础教程之Django介绍</a>
            <a href="/posts/django%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%E4%B9%8B%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/" class="next" rel="next" title="Django基础教程之配置文件详解">Django基础教程之配置文件详解<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.74.3">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank"></a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
